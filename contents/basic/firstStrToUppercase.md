## é—®é¢˜ï¼šJavaScript ä¸­å¦‚ä½¿å­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªå­—æ¯å¤§å†™ï¼Ÿ

å¦‚ä½•è®©ä¸€ä¸ªå­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªå­—æ¯å¤§å†™ï¼Œä½†ä¸æ”¹å˜å…¶ä»–å­—æ¯çš„å¤§å°å†™ï¼Ÿ

ç¤ºä¾‹ï¼š

```

- "this is a test" â†’ "This is a test"
- "the Eiffel Tower" â†’ "The Eiffel Tower"
- "/index.html" â†’ "/index.html"

```

## ç­”æ¡ˆ

åŸºæœ¬è§£å†³æ–¹æ¡ˆæ˜¯ï¼š

```js

function capitalizeFirstLetter(string) {
  return string.charAt(0).toUpperCase() + string.slice(1);
}

console.log(capitalizeFirstLetter('foo')); // Foo

```

å…¶ä»–ä¸€äº›ç­”æ¡ˆä¿®æ”¹äº† `String.prototype`ï¼ˆè¿™ä¸ªç­”æ¡ˆä»¥å‰ä¹Ÿæ˜¯å¦‚æ­¤ï¼‰ï¼Œä½†æˆ‘ç°åœ¨å»ºè®®ä¸è¦è¿™æ ·åšï¼Œå› ä¸ºå¯ç»´æŠ¤æ€§é—®é¢˜ï¼ˆå¾ˆéš¾å‘ç°å‡½æ•°è¢«æ·»åŠ åˆ°åŸå‹ä¸­çš„ä½ç½®ï¼Œå¦‚æœå…¶ä»–ä»£ç ä½¿ç”¨ç›¸åŒçš„åç§°/æµè§ˆå™¨å°†æ¥æ·»åŠ ç›¸åŒåç§°çš„æœ¬åœ°å‡½æ•°ï¼Œå¯èƒ½ä¼šå¯¼è‡´å†²çªï¼‰ã€‚

å¦‚æœä½ æƒ³ç”¨ `Unicode` ä»£ç ç‚¹è€Œä¸æ˜¯ä»£ç å•ä½æ¥å·¥ä½œï¼ˆä¾‹å¦‚å¤„ç†åŸºæœ¬å¤šè¯­è¨€å¹³é¢ä»¥å¤–çš„ `Unicode` å­—ç¬¦ï¼‰ï¼Œä½ å¯ä»¥åˆ©ç”¨ [String#[@iterator]](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/@@iterator)ï¼Œä½¿ç”¨ `toLocaleUpperCase` æ¥è·å¾—å½“å‰æ­£ç¡®çš„
å¤§å†™å­—æ¯ã€‚

```js

const capitalizeFirstLetter = ([ first, ...rest ], locale = navigator.language) =>
  first.toLocaleUpperCase(locale) + rest.join('')

console.log(
  capitalizeFirstLetter('foo'), // Foo
  capitalizeFirstLetter("ğ¶ğ²ğ‘Œğ¼ğ²ğ‘‰"), // "ğğ²ğ‘Œğ¼ğ²ğ‘‰" (correct!)
  capitalizeFirstLetter("italya", 'tr') // Ä°talya" (correct in Turkish Latin!)
)

```

æ›´å¤šå›½é™…åŒ–æ–¹æ¡ˆé€‰æ‹©ï¼Œè¯·å‚é˜…ä¸‹é¢çš„å…¶ä»–ç­”æ¡ˆã€‚

## å…¶ä»–ç­”æ¡ˆ

`Uppercase` åœ¨æŒ‡å®šè„šæœ¬çš„æƒ…å†µä¸‹ï¼Œæ¯ç§è¯­è¨€ä¸­å¾—åˆ°çš„ç»“æœå¹¶ä¸æ„å‘³ç€éƒ½æ˜¯ç›¸åŒçš„ã€‚

å¤§å¤šæ•°å»ºè®®çš„åŠŸèƒ½å¦‚ä¸‹æ‰€ç¤ºï¼š

```js

function capitalizeFirstLetter(str) {
  return str[0].toUpperCase() + str.slice(1);
}

```

ä½†æ˜¯ï¼Œä¸€äº›å¤§å°å†™å­—ç¬¦ä¸åœ¨ `BMP`ï¼ˆåŸºæœ¬å¤šè¯­è¨€å¹³é¢ï¼Œä»£ç ç‚¹ `U+0` åˆ° `U+FFFF`ï¼‰ä¹‹å¤–ã€‚ä¾‹å¦‚ï¼Œä»¥è¿™ä¸ª `Deseret` æ–‡æœ¬ä¸ºä¾‹ï¼š

```js

capitalizeFirstLetter("ğ¶ğ²ğ‘Œğ¼ğ²ğ‘‰"); // "ğ¶ğ²ğ‘Œğ¼ğ²ğ‘‰"

```

è¿™é‡Œçš„ç¬¬ä¸€ä¸ªå­—ç¬¦æ²¡æœ‰å¤§å†™ï¼Œå› ä¸ºå­—ç¬¦ä¸²çš„æ•°ç»„ç´¢å¼•å±æ€§ä¸è®¿é—® `characters` æˆ– `ä»£ç ç‚¹**`ã€‚ä»–ä»¬è®¿é—® `UTF-16` ä»£ç å•å…ƒã€‚åˆ‡ç‰‡æ—¶ä¹Ÿæ˜¯å¦‚æ­¤â€”â€”ç´¢å¼•å€¼æŒ‡å‘ä»£ç å•å…ƒã€‚

```js

'ğ¶ğ²ğ‘Œğ¼ğ²ğ‘‰'[0] // '\uD801'

```

ç¢°å·§ `UTF-16` ä»£ç å•ä½å°±æ˜¯ `1:1`ï¼Œ`USV` ä»£ç å•ä½åœ¨ä¸¤ä¸ªèŒƒå›´å†…ï¼š`U+0` åˆ° `U+D7FF` å’Œ `U+E000` åˆ° `U+FFFF` ã€‚å¤§å¤šæ•°å¤§å°å†™å­—ç¬¦éƒ½åœ¨è¿™ä¸¤ä¸ªèŒƒå›´å†…ï¼Œä½†å¹¶ä¸æ˜¯å…¨éƒ¨çš„ã€‚

ä» `ES2015` å¼€å§‹ï¼Œå¤„ç†è¿™ä¸ªå˜å¾—æ›´å®¹æ˜“äº†ã€‚` String.prototype[@@iterator]` æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°çš„`Iterator` å¯¹è±¡ï¼Œå®ƒéå†å­—ç¬¦ä¸²çš„ä»£ç ç‚¹ï¼Œè¿”å›æ¯ä¸€ä¸ªä»£ç ç‚¹çš„å­—ç¬¦ä¸²å€¼ã€‚

```js

function capitalizeFirstLetter([ first, ...rest ]) {
  console.log(first)
  return [ first.toUpperCase(), ...rest ].join('');
}

capitalizeFirstLetter("ğ¶ğ²ğ‘Œğ¼ğ²ğ‘‰") // ğ¶  and 'ğğ²ğ‘Œğ¼ğ²ğ‘‰'

```

å¯¹äºè¾ƒé•¿çš„å­—ç¬¦ä¸²ï¼Œè¿™å¯èƒ½ä¸æ˜¯éå¸¸æœ‰æ•ˆçš„ã€‚å› ä¸ºæˆ‘ä»¬å¹¶ä¸çœŸçš„éœ€è¦å¯¹å‰©ä½™éƒ¨åˆ†è¿›è¡Œè¿­ä»£ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨`String.prototype.codePointAt` æ¥è·å¾—ç¬¬ä¸€ä¸ªï¼ˆå¯èƒ½çš„ï¼‰å­—æ¯ï¼Œä½†æ˜¯æˆ‘ä»¬ä»ç„¶éœ€è¦ç¡®å®šåˆ‡ç‰‡åº”è¯¥ä»å“ªé‡Œå¼€å§‹ã€‚é¿å…è¿­ä»£ä½™æ•°çš„ä¸€ä¸ªæ–¹æ³•æ˜¯æµ‹è¯•ç¬¬ä¸€ä¸ªä»£ç ç‚¹æ˜¯å¦åœ¨ `BMP` ä¹‹å¤–ï¼›å¦‚æœä¸æ˜¯ï¼Œåˆ†ç‰‡ä» 1 å¼€å§‹ï¼Œå¦‚æœæ˜¯ï¼Œåˆ†ç‰‡ä» 2 å¼€å§‹ã€‚

```js

function capitalizeFirstLetter(str) {
  const firstCP = str.codePointAt(0);
  const index = firstCP > 0xFFFF ? 2 : 1;

  return String.fromCodePoint(firstCP).toUpperCase() + str.slice(index);
}

capitalizeFirstLetter("ğ¶ğ²ğ‘Œğ¼ğ²ğ‘‰") // "ğğ²ğ‘Œğ¼ğ²ğ‘‰"

```

åœ¨å¼€å§‹çš„æ—¶å€™ï¼Œæˆ‘æåˆ°äº†å›½é™…åŒ–çš„è€ƒè™‘ã€‚å…¶ä¸­æœ‰äº›æ˜¯å¾ˆéš¾è§£é‡Šçš„ï¼Œå› ä¸ºå®ƒä»¬ä¸ä»…éœ€è¦äº†è§£ä½¿ç”¨çš„æ˜¯ä»€ä¹ˆè¯­è¨€ï¼Œè€Œä¸”è¿˜å¯èƒ½éœ€è¦äº†è§£è¯¥è¯­è¨€ä¸­çš„å•è¯çš„å…·ä½“çŸ¥è¯†ã€‚

ä¾‹å¦‚ï¼Œçˆ±å°”å…°çš„æ•°å­—ç¬¦å· `mb` åœ¨ä¸€ä¸ªè¯çš„å¼€å¤´å¤§å†™ä¸º `mB`ã€‚

å¦ä¸€ä¸ªä¾‹å­ï¼Œå¾·è¯­çš„ `eszett`ï¼Œæ®è¯´ä»æ¥ä¸ä¼šæ”¾åœ¨å•è¯çš„å¼€å¤´ã€‚å°å†™çš„ eszett `ÃŸ`ï¼Œå¤§å†™ä¸º `SS`ï¼Œä½† `SS` å¯ä»¥å°å†™ä¸º `ÃŸ` æˆ– `ss`ã€‚

ä½ éœ€è¦æœ‰å¾·è¯­çš„è¯­è¨€çŸ¥è¯†æ‰èƒ½çŸ¥é“å“ªä¸ªæ‰æ˜¯æ­£ç¡®çš„ã€‚

è¿™ç±»é—®é¢˜æœ€è‘—åçš„ä¾‹å­å¯èƒ½æ˜¯åœŸè€³å…¶è¯­ã€‚åœ¨åœŸè€³å…¶æ‹‰ä¸è¯­ä¸­ï¼Œ`i` çš„å¤§å†™å½¢å¼æ˜¯ `Ä°`ï¼Œè€Œ `I` çš„å°å†™å½¢å¼æ˜¯ `Ä±`ã€‚

å®ƒä»¬æ˜¯ä¸¤ä¸ªä¸åŒçš„å­—æ¯ã€‚å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬ç¡®å®æœ‰åŠæ³•è§£å†³è¿™ä¸ªé—®é¢˜ï¼š

```js
function capitalizeFirstLetter([ first, ...rest ], locale) {
  return [ first.toLocaleUpperCase(locale), ...rest ].join('');
}

capitalizeFirstLetter("italy", "en") // "Italy"
capitalizeFirstLetter("italya", "tr") // "Ä°talya"
```

åœ¨æµè§ˆå™¨ä¸­ï¼Œç”¨æˆ·æœ€å¸¸ç”¨çš„è¯­è¨€æ ‡ç­¾ç”± `navigator.language` æ ‡æ˜ã€‚

`navigator.languages` ä¸­åˆ™ä¹Ÿå¯ä»¥æ‰¾åˆ°æŒ‰ä¼˜å…ˆé¡ºåºæ’åˆ—çš„è¯­è¨€æ ‡ç­¾åˆ—è¡¨ã€‚

```js
navigator.language // 'zh-CN'
navigator.languages // ['zh-CN', 'zh', 'en']
```

åœ¨ `ES2018` ä¸­å¼•å…¥çš„ `RegExp` ä¸­æ”¯æŒ `Unicode` å±æ€§å­—ç¬¦ç±»çš„ä»£ç†ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç›´æ¥è¡¨è¾¾æˆ‘ä»¬æ„Ÿå…´è¶£çš„å­—ç¬¦æ¥è¿›ä¸€æ­¥ä¼˜åŒ–ä»£ç ï¼š

```js
function capitalizeFirstLetter(str, locale=navigator.language) {
  return str.replace(/^\p{CWU}/u, char => char.toLocaleUpperCase(locale));
}
```

ä¼˜åŒ–è¿‡åï¼Œç°åœ¨å°±èƒ½å¤Ÿæ¯”è¾ƒç²¾å‡†åœ°å¤„ç†å­—ç¬¦ä¸²ä¸­å¤šä¸ªå•è¯çš„å¤§å†™ã€‚`CWU` æˆ– `Changes_When_Uppercased` å­—ç¬¦å±æ€§ä¸æ‰€æœ‰ä»£ç ç‚¹ç›¸åŒ¹é…ï¼Œè¿™äº›ä»£ç ç‚¹åœ¨å¤§å†™æ—¶å°†ä¼šå‘ç”Ÿå˜åŒ–ã€‚

æˆ‘ä»¬å¯ä»¥ç”¨è¯¸å¦‚è·å…°è¯­ `Ä³` è¿™æ ·çš„å¤§å†™æ•°å­—å­—ç¬¦æ¥è¯•è¯•ã€‚

```js
capitalizeFirstLetter('Ä³sselmeer'); // "Ä²sselmeer"
```

## æœ€å

åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œé—®è¿™ä¸ªé—®é¢˜çš„äººéƒ½ä¸ä¼šå…³å¿ƒ `Deseret` çš„å¤§å†™å­—æ¯æˆ–å›½é™…åŒ–é—®é¢˜ã€‚ä½†æ˜¯ï¼Œèƒ½ææå‰æ„è¯†åˆ°è¿™äº›é—®é¢˜æ˜¯å¾ˆå¥½çš„ï¼Œå› ä¸ºä½ ä¸çŸ¥é“ä»€ä¹ˆæ—¶å€™å°±ä¼šé‡åˆ°è¿™äº›é—®é¢˜ã€‚å®ƒä»¬å¹¶ä¸æ˜¯ `è¾¹ç¼˜` æ¡ˆä¾‹ï¼Œæˆ–è€…è¯´ï¼Œå®ƒä»¬ä¸æ˜¯å®šä¹‰ä¸Šçš„è¾¹ç¼˜æ¡ˆä¾‹ï¼Œæ¯•ç«Ÿæœ‰ä¸€æ•´ä¸ªå›½å®¶çš„å¤§å¤šæ•°äººéƒ½è¯´åœŸè€³å…¶è¯­ã€‚

å°†ä»£ç å•å…ƒä¸ä»£ç ç‚¹æ··æ·†æ˜¯ä¸€ä¸ªç›¸å½“å¸¸è§çš„é”™è¯¯æ¥æºï¼ˆç‰¹åˆ«æ˜¯åœ¨è¡¨æƒ…ç¬¦å·æ–¹é¢ï¼‰ï¼Œå­—ç¬¦ä¸²å’Œè¯­è¨€éƒ½æ˜¯ç›¸å½“å¤æ‚çš„ã€‚

> é—®é¢˜æ¥æºï¼š[https://stackoverflow.com/questions/1026069/how-do-i-make-the-first-letter-of-a-string-uppercase-in-javascript/53930826](https://stackoverflow.com/questions/1026069/how-do-i-make-the-first-letter-of-a-string-uppercase-in-javascript/53930826)